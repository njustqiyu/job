BO项目支撑的相关说明
1．	账号申请
这里我们需要申请三个账号以便后面的操作：华为公有云，堡垒机，跳板机
（找李大伟l00275559申请）
网址：https://ops.besclouds.com/apply/

 
1.1	华为公有云
作用：前台，查看镜像、服务器等的运行状态
网址：https://auth.huaweicloud.com/authui/login.action?service=https://console.huaweicloud.com/swr/#/login

 
1.2	堡垒机
作用：去后台定位问题
网址：见邮件https://117.78.32.157/#/login
注意：以手机短信的方式登录

 
1.3	跳板机
概念理解：
就是可以进行远程连接的机器，通过这个机器可以再去访问别的机器。
应用场景：需要访问客户方的服务器并且服务不能通过外网连接时，只能使用远程连接如Teamview QQ连接到远程的电脑，目前的这个电脑就是跳板机，作为一个桥梁，然后再通过这个机器在内网中访问服务器。
作用：作为跳板登录后台服务器
网址：见邮件
注意：先使用域账号登录http://jumper.huawei.com/#，再用申请的账号登录

 

 



 

在华为云上，可以查看云磁盘的信息，
具体操作如下：
 
 
 
2．	了解原生BO 
目的：熟悉原生BO的基本操作，掌握原生BO项目从提交到部署的整个流程。
访问网址：https://qaopen.besclouds.com/studio/index.html#/projects
用户名：feiwu44@126.com
密码：Admin_1234
参考资料：nativeBO使用指导.docx
3．	BO项目部署中的细节问题
3.1		部署前
1，部署环境
   在进行部署之前需要确保部署环境的安全：有可能在升级、有可能在调试，需要询问一下bingo那边的开发人员
2，镜像格式
提供的镜像的格式只能是.tar或.tar.gz
标准的docker镜像，必须要有repoName，tag【仓库名，版本号】
3.2		部署中
1.	Images
我们上传的镜像存储在公有云的SWR镜像仓库，可以登录公有云进行相关查看
 
 
2.	Charts
作用：用于生成k8s资源配置文件
注意事项：
1）端口必须是暴露服务本身的端口
 
 
2）在“规格详情”菜单里，下拉有一个“数据存储”的选项
 
这里表示 当项目需要很大的存储空间时，需要额外挂载PVC（找李大伟申请），申请必须是该服务所在的同一集群、同一命名空间下。挂载的信息可以在公有云上查看。
 

写入数据时，采用的方法是在公有云的机器上建立一个ftp服务器
3.	Service
作用：镜像运行起来暴露的接口
注意事项：Response必须要正确配置

 
4.	Publish
作用：把配置好的信息发送给bingo, bingo会编排成yaml文件。
3.3		部署
在上述操作完成之后，可以进行部署操作
1.	部署失败的类型

 

在部署时会遇到的一些失败：
Charts部署：就是镜像部署到集群中的过程
元数据部署：就是调用bingo的接口编排微服务接口
创建DNS：用于bingo调用serviceHub集群的组网使用，可以在公有云上查看

 

 

创建路由：在bingo的nginx上创建路由，目前不能自动创建，需要手工创建。是用于公网访问的，需要提供上面的DNS，依据DNS来创建路由。

2.	微服务监控
 
作用：查看容器的服务运行状态。Charts部署成功就可以看到。
3.	云数据库信息查看
 

 
可以进入查看servcehub上所有BO项目的数据库操作
 
 
可以通过书写SQL语句进行一些查询
例如，在任务表sh_bo_deploy_task中，
status=3【成功】status=4【失败】
RETRY_TIMES最多只能上传3次，当然这里可以依据用户需求，修改上传次数的上限

以上都是前台看信息的内容。
下面讲述如何去后台定位问题
3.4		后台定位问题
这里需要登录堡垒机，也就是集群节点的后台，依此去查看服务的容器。

 

 

定位的问题分为两大类：servicehub部署问题、部署的服务本身容器的问题
1.	查询servicehub这个工具的部署问题
1）	docker ps|grep servicehub【找到该集群中servicehub的容器】
 
2）	docker logs 592a6283155e -f --tail==1000
查看servicehub的运行日志，定位部署时出现的问题需要查看的日志。（ctrl+c可以强制退出）
2.	查询部署服务本身的容器问题
1）	docker ps|grep iserver	【找到部署服务的容器】
 
2）	docker logs 19599f1014a7 -f --tail=10【查看服务的日志】
3）	docker exec –it 19599f1014a7 bash【进入容器内部的文件系统】
这一步主要是有挂在的云存储时需要查看的
 
4）	df –h【查看云存储是否挂载成功】
 

